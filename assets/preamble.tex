%%% Language
% Mathematics
\usepackage{amsmath,amsfonts,amssymb}
% Fonts
\usepackage[math]{anttor}\everymath{\displaystyle}\DeclareMathAlphabet{\mathcal}{OMS}{cmsy}{m}{n}
% Japanese
% \usepackage[whole]{bxcjkjatype} % for pdfLaTeX
\usepackage[no-math]{luatexja-preset} % https://lualatexlab.blog.fc2.com/blog-entry-30.html
% \setmainfont[
%     Path           = /Library/Fonts/,
%     Extension      = .ttc,
%     Ligatures      = TeX
% ]{BIZ-UDMinchoM}  % なぜか動いていないが放置 1/9/2025

%%% Layouts
% Figures
\usepackage{graphicx}
% Geometry
\geometry{top=15truemm,bottom=15truemm,left=10truemm,right=10truemm}

%%% User Experience & References
% Colors
\usepackage{xcolor}\definecolor{ParisGreen}{cmyk}{1,0.07,0.10,0.10}\definecolor{minty}{HTML}{80c4ac}\definecolor{unite}{HTML}{e95420}\definecolor{beige}{rgb}{0.96, 0.96, 0.86}\definecolor{ParisBlue}{HTML}{0096FF}
% Links
\usepackage{url}\usepackage[colorlinks,linkcolor=ParisGreen,urlcolor=ParisGreen,citecolor=ParisGreen]{hyperref}
% Bibliography
\RequirePackage[authoryear]{natbib}\bibliographystyle{abbrvnat}\usepackage[nottoc]{tocbibind}%Includes "References" in the TOC
% Boxes
\usepackage[breakable]{tcolorbox}

%%% Environments
% Enumerate
\usepackage{enumerate}\renewcommand{\labelenumi}{(\arabic{enumi})}\renewcommand{\labelenumii}{(\roman{enumii})}\renewcommand{\labelenumiii}{(\alph{enumiii})}
% Theorems
\usepackage{amsthm}\newtheoremstyle{StatementsWithUnderline}% ?name?
{3pt}% ?Space above? 1
{3pt}% ?Space below? 1
{}% ?Body font?
{}% ?Indent amount? 2
{\bfseries}% ?Theorem head font?
{\textbf{.}}% ?Punctuation after theorem head?
{.5em}% ?Space after theorem head? 3
{\textbf{\underline{\textup{#1~\thetheorem{}}}}\;\thmnote{(#3)}}% ?Theorem head spec (can be left empty, meaning ‘normal’)?
\definecolor{darkolivegreen}{rgb}{0.33, 0.42, 0.18}\newenvironment{Proof}[1][\bf\underline{［証明］}]{\proof[#1]\color{darkolivegreen}}{\endproof}\renewcommand{\qedsymbol}{$\blacksquare$}
\theoremstyle{StatementsWithUnderline}\newtheorem{theorem}{定理}[section]\newtheorem{definition}[theorem]{定義}\newtheorem{corollary}[theorem]{系}\newtheorem{proposition}[theorem]{命題}\newtheorem{lemma}[theorem]{補題}\newtheorem{example}[theorem]{例}
\theoremstyle{definition}\newtheorem{notation}[theorem]{記法}\newtheorem{algorithm}[theorem]{算譜}\newtheorem{remarks}[theorem]{要諦}\newtheorem{remark}[theorem]{注}
\usepackage{etoolbox}\AtEndEnvironment{example}{\hfill\ensuremath{\Box}}\renewcommand{\thefootnote}{\dag\arabic{footnote}}\renewcommand{\thempfootnote}{\dag\arabic{mpfootnote}}

%%% Snippets
\newcommand{\bluenote}[1]{\textcolor{unite}{\textbf{#1}}}
\newcommand{\abs}[1]{\lvert#1\rvert}\newcommand{\Abs}[1]{\left|#1\right|}\newcommand{\ABs}[1]{\biggl|#1\biggr|}\newcommand{\norm}[1]{\|#1\|}\newcommand{\Norm}[1]{\left\|#1\right\|}\newcommand{\NOrm}[1]{\biggl\|#1\biggr\|}\newcommand{\nnorm}[1]{{\left\vert\kern-0.25ex\left\vert\kern-0.25ex\left\vert #1 \right\vert\kern-0.25ex\right\vert\kern-0.25ex\right\vert}}\newcommand{\Brace}[1]{\left\{#1\right\}}\newcommand{\BRace}[1]{\biggl\{#1\biggr\}}\newcommand{\paren}[1]{\left(#1\right)}\newcommand{\Paren}[1]{\biggr(#1\biggl)}\newcommand{\bracket}[1]{\langle#1\rangle}\newcommand{\brac}[1]{\langle#1\rangle}\newcommand{\Bracket}[1]{\left\langle#1\right\rangle}\newcommand{\Brac}[1]{\left\langle#1\right\rangle}\newcommand{\bra}[1]{\left\langle#1\right|}\newcommand{\ket}[1]{\left|#1\right\rangle}\newcommand{\Square}[1]{\left[#1\right]}\newcommand{\SQuare}[1]{\biggl[#1\biggr]}\newcommand{\ov}[1]{\overline{#1}}\newcommand{\un}[1]{\underline{#1}}\newcommand{\wt}[1]{\widetilde{#1}}\newcommand{\wh}[1]{\widehat{#1}}\usepackage{mathabx}\newcommand{\wc}{\widecheck}\def\widebreve{\mathpalette\wide@breve}\def\wide@breve#1#2{\sbox\z@{$#1#2$}\mathop{\vbox{\m@th\ialign{##\crcr\kern0.08em\brevefill#1{0.8\wd\z@}\crcr\noalign{\nointerlineskip}$\hss#1#2\hss$\crcr}}}\limits}\def\brevefill#1#2{$\m@th\sbox\tw@{$#1($}\hss\resizebox{#2}{\wd\tw@}{\rotatebox[origin=c]{90}{\upshape(}}\hss$}\makeatother\newcommand{\wb}[1]{\widebreve{#1}}\newcommand{\pp}[2]{\frac{\partial #1}{\partial #2}}\newcommand{\ppp}[3]{\frac{\partial #1}{\partial #2\partial #3}}\newcommand{\dd}[2]{\frac{d #1}{d #2}}\newcommand{\floor}[1]{\lfloor#1\rfloor}\newcommand{\Floor}[1]{\left\lfloor#1\right\rfloor}\newcommand{\ceil}[1]{\lceil#1\rceil}\newcommand{\Ceil}[1]{\left\lceil#1\right\rceil}\newcommand{\ocinterval}[1]{(#1]}\newcommand{\cointerval}[1]{[#1)}\newcommand{\COinterval}[1]{\left[#1\right)}\newcommand{\comb}[2]{\begin{pmatrix}#1\\#2\end{pmatrix}}\newcommand{\vctr}[2]{\begin{pmatrix}#1\\#2\end{pmatrix}}\newcommand{\vctrr}[3]{\begin{pmatrix}#1\\#2\\#3\end{pmatrix}}\newcommand{\mtrx}[4]{\begin{pmatrix}#1&#2\\#3&#4\end{pmatrix}}\newcommand{\smtrx}[4]{\paren{\begin{smallmatrix}#1&#2\\#3&#4\end{smallmatrix}}}
\renewcommand{\do}[1]{\csdef{#1}{\mathrm{#1}}}\docsvlist{False,True,otherwise,TV,Top,Ban,Hilb,REGEX,RE,SimpGph,Gph,loc,cpt,lcpt,com,Haus,proper,TVS,ess,ext,normal,Prob,Mark,Meas,Set,Grp,Cat,Mon,RingCRing,Ab,Pos,Vect,FinVect,FinSet,FinMeas,Fun,Func,Alg,Met,Stoch,FinStoch,Rel,Bool,CABool,CompBoolAlg,BoolAlg,BoolRng,HeytAlg,CompHeytAlg,Lat,CompLat,SemiLat,Stone,Mfd,LigAlg,Sob,Sh,PSh,Unif,Frm,Locale,Diff,Quiv,Corr,Decat,Rep,Grpd,sSet,Mod,SmoothMnf,stably,Cont,Minimize,LHS,RHS,HS,sn,cl,pl,AIC,mrl,UMV,BLU,mb,sd,op,apf,opt,BMO,BL,AC,Lip,Borel,sa,err,canon,res,per,diag}\renewcommand{\do}[1]{\csdef{b#1}{\mathbb{#1}}}\docsvlist{A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z}\renewcommand{\do}[1]{\csdef{c#1}{\mathcal{#1}}}\docsvlist{A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z}\renewcommand{\do}[1]{\csdef{f#1}{\mathfrak{#1}}}\docsvlist{A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z}\renewcommand{\do}[1]{\csdef{r#1}{\mathrm{#1}}}\docsvlist{A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,t}\renewcommand{\do}[1]{\csdef{o#1}{\operatorname{#1}}}\docsvlist{d,Q}\renewcommand{\do}[1]{\csdef{#1}{\mathbb{#1}}}\docsvlist{G,K,M,R,N,Q,T}\renewcommand{\do}[1]{\csdef{#1}{\mathcal{#1}}}\docsvlist{A,B,D,F,H,I,J,L,S,U,W,X,Y,Z}\renewcommand{\do}[1]{\csdef{hat#1}{\widehat{\mathbb{#1}}}}\docsvlist{C,R}\newcommand{\oR}{\ov{\R}}\renewcommand{\do}[1]{\csdef{w#1}{\widehat{\wt{#1}}}}\docsvlist{B}\renewcommand{\b}[1]{\boldsymbol{#1}}\renewcommand{\r}[1]{\mathrm{#1}}\renewcommand{\do}[1]{\csdef{#1}{\b{#1}}}\docsvlist{e,f,k,n,p,q,x}\renewcommand{\do}[1]{\csdef{b#1}{\b{#1}}}\docsvlist{e,n,r,x}\renewcommand{\do}[1]{\csdef{#1}{\mathfrak{#1}}}\docsvlist{g,h,m}
\newcommand{\indep}{\perp\!\!\!\perp}\newcommand{\on}{\text{on}\;}\newcommand{\In}{\mathrm{in}\;}\newcommand{\const}{\mathrm{const.}}\newcommand{\GAMMA}{\mathrm{Gamma}}\newcommand{\al}{\alpha}\newcommand{\om}{\omega}\newcommand{\Om}{\Omega}\newcommand{\ep}{\epsilon}\newcommand{\dae}{\text{-a.e.}}\newcommand{\das}{\text{-a.s.}}\renewcommand{\ae}{\mathrm{a.e.}\;}\newcommand{\aseq}{\overset{\text{a.s.}}{=}}\newcommand{\deq}{\overset{\text{d}}{=}}\newcommand{\as}{\;\text{a.s.}}\newcommand{\io}{\;\text{i.o.}}\newcommand{\fe}{\;\text{f.e.}}\newcommand{\iid}{\text{i.i.d.}}\newcommand{\comp}{\complement}\newcommand{\iidsim}{\overset{\iid}{\sim}}\newcommand{\propt}{\,\propto\,}\newcommand{\midd}{\,\mid\,}\newcommand{\Mid}{\,\bigg|\,}\newcommand{\iso}{\xrightarrow{\,\smash{\raisebox{-0.45ex}{\ensuremath{\scriptstyle\sim}}}\,}}\newcommand{\mono}{\hookrightarrow}\newcommand{\epi}{\twoheadrightarrow}\newcommand{\wto}{\overset{\text{w}}{\to}}\newcommand{\dto}{\overset{\text{d}}{\to}}\newcommand{\sto}{\overset{\text{s}}{\to}}\newcommand{\pto}{\overset{\text{p}}{\to}}\newcommand{\mto}{\overset{m}{\to}}\newcommand{\vto}{\overset{v}{\to}}\newcommand{\asto}{\xrightarrow{\as}}\makeatletter\newcommand{\dbloverline}[1]{\overline{\dbl@overline{#1}}}\newcommand{\dbl@overline}[1]{\mathpalette\dbl@@overline{#1}}\newcommand{\dbl@@overline}[2]{\begingroup\sbox\z@{$\m@th#1\overline{#2}$}\ht\z@=\dimexpr\ht\z@-2\dbl@adjust{#1}\relax\box\z@\ifx#1\scriptstyle\kern-\scriptspace\else\ifx#1\scriptscriptstyle\kern-\scriptspace\fi\fi\endgroup}\newcommand{\dbl@adjust}[1]{\fontdimen8\ifx#1\displaystyle\textfont\else\ifx#1\textstyle\textfont\else\ifx#1\scriptstyle\scriptfont\else\scriptscriptfont\fi\fi\fi 3}\makeatother\newcommand{\oo}[1]{\dbloverline{#1}}\makeatletter\newcommand{\PV}{\mathrm{P.V.}}\newcommand*{\Laplace}{\mathop{}\!\mathbin\bigtriangleup}\newcommand{\Lap}{\Laplace}\newcommand*{\DAlambert}{\mathop{}\!\mathbin\Box}\newcommand{\osub}{\overset{\mathrm{open}}{\subset}}\newcommand{\osup}{\overset{\mathrm{open}}{\supset}}\newcommand{\csub}{\overset{\textrm{closed}}{\subset}}\newcommand{\csup}{\overset{\textrm{closed}}{\supset}}\newcommand{\compsub}{\overset{\textrm{cpt}}{\subset}}\newcommand{\fsub}{\overset{\text{finite}}{\subset}}\newcommand{\ssub}{\Subset}
\newcommand{\RelaxCommands}[1]{\renewcommand*{\do}[1]{\expandafter\let\csname ##1\endcsname\relax}\docsvlist{#1}}\RelaxCommands{div,pr,id,Re,Im,P,vec}\newcommand{\DeclareMathOperators}[1]{\renewcommand*{\do}[1]{\expandafter\DeclareMathOperator\csname ##1\endcsname{##1}}\docsvlist{#1}}\DeclareMathOperators{P,E,V,C,Var,Cov,Hom,Iso,Mor,Isom,Aut,End,grad,rot,div,Div,curl,sign,tr,Tr,pr,ev,id,Map,dom,Dom,Cod,supp,Ker,Coker,coker,Coim,rank,codim,Cl,Int,Op,lip,Mol,Gr,lcm,sgn,GL,SL,alt,Re,Im,Gal,RGL,PSL,Log,Res,diam,Area,dist,Length,Ord,Card,Disc,Codisc,CoDisc,Ult,ord,maj,PConn,mult,inv,Der,Sp,Exp,Imm,Imb,Ad,SO,SU,Stab,nor,Aff,Ext,Tor,Frac,Spec,Sym,Ann,Her,Bil,Ses,FVS,Ho,CW,lc,cg,Fib,Cyl,Ch,Inc,aInc,Epi,Ex,Co,dvol,Sconv,Index,SSR,EDM,Tw,RM,BV,lub,Graph,Ascent,Descent,BIL,Pe,cond,round,Adj,Pf,Sg,Ent,Polya,LR,CP,Pois,bit,sinc,Ri,Cone,pre,SH,Ei,Ens,Do,IV,arctanh,NB,Conv,VC,Avar,Ber,Mult,BPois,IF,IG,Levy,MP,Hermite,Skellam,Dirichlet,Beta,MISE,logit,expit,Gauss,Em,Bin,HG,erf,Cauchy,FE,GLS,POOL,GMM,MM,SSIV,JIV,AR,ILS,SLS,LIML,Rad,Slv,Hypo,CL,ba,ca,Ob,Ar,Arr,eq,coeq,act,Span,Ricc,IS,IR,KL,ESS,MSE,vec,SK,ri,prox}\DeclareMathOperator*{\esssup}{ess\,sup}\DeclareMathOperator*{\argmax}{arg\,max}\DeclareMathOperator*{\argmin}{arg\,min}